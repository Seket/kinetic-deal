/*
  # Seed Default Data for SalesPro CRM

  1. Default Pipeline Stages
    - Creates standard sales pipeline stages
    - Prospecting, Qualification, Demo, Proposal, Negotiation, Won, Lost

  2. Default Tags
    - Creates common tags for deals and contacts
    - Enterprise, SMB, Hot Lead, Cold Lead, etc.

  3. Sample Organization
    - Creates a demo organization for testing
*/

-- Insert default organization (for demo purposes)
INSERT INTO auth.users (id, email, encrypted_password, email_confirmed_at, created_at, updated_at)
VALUES (
  '00000000-0000-0000-0000-000000000001',
  'demo@salespro.com',
  crypt('demo123', gen_salt('bf')),
  now(),
  now(),
  now()
) ON CONFLICT (id) DO NOTHING;

-- Insert demo user
INSERT INTO users (id, email, full_name, organization_id, role)
VALUES (
  '00000000-0000-0000-0000-000000000001',
  'demo@salespro.com',
  'Demo User',
  '00000000-0000-0000-0000-000000000001',
  'admin'
) ON CONFLICT (id) DO NOTHING;

-- Insert default pipeline stages
INSERT INTO pipeline_stages (id, name, color, stage_order, organization_id) VALUES
  ('10000000-0000-0000-0000-000000000001', 'Prospecting', '#6B7280', 1, '00000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000002', 'Qualification', '#3B82F6', 2, '00000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000003', 'Demo', '#F59E0B', 3, '00000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000004', 'Proposal', '#8B5CF6', 4, '00000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000005', 'Negotiation', '#F97316', 5, '00000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000006', 'Won', '#10B981', 6, '00000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000007', 'Lost', '#EF4444', 7, '00000000-0000-0000-0000-000000000001')
ON CONFLICT (id) DO NOTHING;

-- Insert default tags
INSERT INTO tags (id, name, color, organization_id) VALUES
  ('20000000-0000-0000-0000-000000000001', 'Enterprise', '#3B82F6', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000002', 'SMB', '#10B981', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000003', 'Hot Lead', '#EF4444', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000004', 'Cold Lead', '#6B7280', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000005', 'Software', '#8B5CF6', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000006', 'Services', '#F59E0B', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000007', 'Implementation', '#06B6D4', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000008', 'Training', '#84CC16', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000009', 'Support', '#F97316', '00000000-0000-0000-0000-000000000001'),
  ('20000000-0000-0000-0000-000000000010', 'Renewal', '#EC4899', '00000000-0000-0000-0000-000000000001')
ON CONFLICT (id) DO NOTHING;

-- Insert sample companies
INSERT INTO companies (id, name, website, industry, size, phone, organization_id, created_by) VALUES
  ('30000000-0000-0000-0000-000000000001', 'TechCorp Inc.', 'https://techcorp.com', 'Technology', 'Enterprise', '+1-555-0100', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('30000000-0000-0000-0000-000000000002', 'StartupXYZ', 'https://startupxyz.com', 'Technology', 'Startup', '+1-555-0101', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('30000000-0000-0000-0000-000000000003', 'Global Solutions', 'https://globalsolutions.com', 'Consulting', 'Enterprise', '+1-555-0102', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('30000000-0000-0000-0000-000000000004', 'MidSize Corp', 'https://midsizecorp.com', 'Manufacturing', 'Mid-Market', '+1-555-0103', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('30000000-0000-0000-0000-000000000005', 'FinanceFirst', 'https://financefirst.com', 'Financial Services', 'Enterprise', '+1-555-0104', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001')
ON CONFLICT (id) DO NOTHING;

-- Insert sample contacts
INSERT INTO contacts (id, first_name, last_name, email, phone, position, company_id, contact_type, organization_id, created_by) VALUES
  ('40000000-0000-0000-0000-000000000001', 'John', 'Smith', 'john@techcorp.com', '+1-555-0100', 'CTO', '30000000-0000-0000-0000-000000000001', 'decision_maker', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('40000000-0000-0000-0000-000000000002', 'Emily', 'Davis', 'emily@startupxyz.com', '+1-555-0101', 'Marketing Director', '30000000-0000-0000-0000-000000000002', 'primary', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('40000000-0000-0000-0000-000000000003', 'Robert', 'Brown', 'robert@globalsolutions.com', '+1-555-0102', 'VP of Operations', '30000000-0000-0000-0000-000000000003', 'decision_maker', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('40000000-0000-0000-0000-000000000004', 'Lisa', 'Anderson', 'lisa@midsizecorp.com', '+1-555-0103', 'IT Director', '30000000-0000-0000-0000-000000000004', 'primary', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('40000000-0000-0000-0000-000000000005', 'Michael', 'Garcia', 'michael@financefirst.com', '+1-555-0104', 'CISO', '30000000-0000-0000-0000-000000000005', 'decision_maker', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001')
ON CONFLICT (id) DO NOTHING;

-- Insert sample deals
INSERT INTO deals (id, title, description, value, probability, expected_close_date, stage_id, company_id, primary_contact_id, assigned_to, priority, organization_id, created_by) VALUES
  ('50000000-0000-0000-0000-000000000001', 'Enterprise Software License', 'Multi-year enterprise software licensing deal', 75000.00, 25, '2024-11-15', '10000000-0000-0000-0000-000000000001', '30000000-0000-0000-0000-000000000001', '40000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'high', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('50000000-0000-0000-0000-000000000002', 'Digital Marketing Package', 'Comprehensive digital marketing solution', 15000.00, 50, '2024-10-30', '10000000-0000-0000-0000-000000000002', '30000000-0000-0000-0000-000000000002', '40000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'medium', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('50000000-0000-0000-0000-000000000003', 'Cloud Infrastructure', 'Cloud migration and infrastructure setup', 120000.00, 70, '2024-11-30', '10000000-0000-0000-0000-000000000003', '30000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'high', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('50000000-0000-0000-0000-000000000004', 'CRM Implementation', 'Custom CRM implementation and training', 45000.00, 80, '2024-10-25', '10000000-0000-0000-0000-000000000004', '30000000-0000-0000-0000-000000000004', '40000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', 'medium', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('50000000-0000-0000-0000-000000000005', 'Security Audit Service', 'Comprehensive security audit and compliance', 28000.00, 90, '2024-10-20', '10000000-0000-0000-0000-000000000005', '30000000-0000-0000-0000-000000000005', '40000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', 'high', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001')
ON CONFLICT (id) DO NOTHING;

-- Insert deal tags
INSERT INTO deal_tags (deal_id, tag_id) VALUES
  ('50000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001'), -- Enterprise
  ('50000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000005'), -- Software
  ('50000000-0000-0000-0000-000000000002', '20000000-0000-0000-0000-000000000002'), -- SMB
  ('50000000-0000-0000-0000-000000000002', '20000000-0000-0000-0000-000000000006'), -- Services
  ('50000000-0000-0000-0000-000000000003', '20000000-0000-0000-0000-000000000001'), -- Enterprise
  ('50000000-0000-0000-0000-000000000003', '20000000-0000-0000-0000-000000000007'), -- Implementation
  ('50000000-0000-0000-0000-000000000004', '20000000-0000-0000-0000-000000000007'), -- Implementation
  ('50000000-0000-0000-0000-000000000004', '20000000-0000-0000-0000-000000000005'), -- Software
  ('50000000-0000-0000-0000-000000000005', '20000000-0000-0000-0000-000000000001'), -- Enterprise
  ('50000000-0000-0000-0000-000000000005', '20000000-0000-0000-0000-000000000006')  -- Services
ON CONFLICT DO NOTHING;

-- Insert sample activities
INSERT INTO activities (id, type, title, description, due_date, deal_id, contact_id, assigned_to, organization_id, created_by) VALUES
  ('60000000-0000-0000-0000-000000000001', 'call', 'Follow-up call with TechCorp', 'Discuss technical requirements and implementation timeline', '2024-10-18 14:00:00+00', '50000000-0000-0000-0000-000000000001', '40000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('60000000-0000-0000-0000-000000000002', 'meeting', 'Product demo for Global Solutions', 'Present cloud infrastructure capabilities', '2024-10-19 10:00:00+00', '50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('60000000-0000-0000-0000-000000000003', 'email', 'Send proposal to MidSize Corp', 'Send detailed CRM implementation proposal', '2024-10-17 09:00:00+00', '50000000-0000-0000-0000-000000000004', '40000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001')
ON CONFLICT (id) DO NOTHING;

-- Insert sample leads
INSERT INTO leads (id, first_name, last_name, email, phone, company_name, position, source, status, score, assigned_to, organization_id, created_by) VALUES
  ('70000000-0000-0000-0000-000000000001', 'Alex', 'Thompson', 'alex@newcompany.com', '+1-555-0123', 'NewCompany Ltd', 'CEO', 'Website', 'new', 85, '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
  ('70000000-0000-0000-0000-000000000002', 'Maria', 'Rodriguez', 'maria@innovate.com', '+1-555-0124', 'Innovate Solutions', 'CTO', 'LinkedIn', 'qualified', 92, '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001')
ON CONFLICT (id) DO NOTHING;